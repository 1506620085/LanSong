# ç™»å½•å¯¹è¯æ¡†æ ·å¼å’ŒåŠŸèƒ½åŒæ­¥è¯´æ˜

## æ›´æ–°å†…å®¹

### âœ… å·²å®Œæˆçš„åŒæ­¥

1. **æ ·å¼ç»Ÿä¸€**
   - å°† `LocalLoginDialog.vue` çš„ç°ä»£åŒ–æ ·å¼åº”ç”¨åˆ° `LoginDialog.vue`
   - ä¸¤ä¸ªå¯¹è¯æ¡†ç°åœ¨å…·æœ‰ä¸€è‡´çš„UIè®¾è®¡å’Œç”¨æˆ·ä½“éªŒ

2. **åŠŸèƒ½å¢å¼º**
   - ä¸º `LocalLoginDialog.vue` æ·»åŠ äº†120ç§’å€’è®¡æ—¶åŠŸèƒ½
   - å€’è®¡æ—¶åˆ°0æ—¶è‡ªåŠ¨æ ‡è®°äºŒç»´ç ä¸ºè¿‡æœŸçŠ¶æ€

## è¯¦ç»†å˜æ›´

### LoginDialog.vueï¼ˆç™»å½•ç½‘æ˜“äº‘éŸ³ä¹ï¼‰

#### UIæ”¹è¿›
- âœ… é‡‡ç”¨å¡ç‰‡å¼äºŒç»´ç å±•ç¤ºï¼ˆå¸¦é˜´å½±å’Œåœ†è§’ï¼‰
- âœ… ä¼˜åŒ–åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âœ… æ·»åŠ æ‰‹æœºå›¾æ ‡å’Œæ›´æ¸…æ™°çš„æç¤ºæ–‡å­—
- âœ… å¢å¼ºè§†è§‰çŠ¶æ€åé¦ˆï¼ˆç­‰å¾…/å·²æ‰«ç /è¿‡æœŸï¼‰
- âœ… æ·»åŠ å€’è®¡æ—¶æ˜¾ç¤ºï¼ˆè“è‰²é«˜äº®ï¼ŒåŠ¨æ€æ›´æ–°ï¼‰

#### åŠŸèƒ½ä¼˜åŒ–
- âœ… ä¿ç•™å¹¶ä¼˜åŒ–120ç§’å€’è®¡æ—¶åŠŸèƒ½
- âœ… æ”¹è¿›çŠ¶æ€ç®¡ç†ï¼ˆwaiting/scanned/expiredï¼‰
- âœ… å¢å¼ºé”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
- âœ… é»˜è®¤é€‰ä¸­"è®°ä½æˆ‘"é€‰é¡¹

#### æ ·å¼ç‰¹ç‚¹
```css
- äºŒç»´ç å°ºå¯¸ï¼š200x200px
- å®¹å™¨å†…è¾¹è·ï¼š12px
- åœ†è§’ï¼š12px
- é˜´å½±ï¼š0 2px 12px rgba(0,0,0,0.1)
- çŠ¶æ€å›¾æ ‡ï¼š36-48px
- å€’è®¡æ—¶é¢œè‰²ï¼š#409effï¼ˆè“è‰²ï¼‰
- è¿‡æœŸé¢œè‰²ï¼š#e6a23cï¼ˆæ©™è‰²ï¼‰
```

### LocalLoginDialog.vueï¼ˆæœ¬æœºç½‘æ˜“äº‘ç™»å½•ï¼‰

#### æ–°å¢åŠŸèƒ½
- âœ… æ·»åŠ 120ç§’å€’è®¡æ—¶åŠŸèƒ½
- âœ… å€’è®¡æ—¶åˆ°0è‡ªåŠ¨æ ‡è®°ä¸ºè¿‡æœŸ
- âœ… å€’è®¡æ—¶æ•°å­—è“è‰²é«˜äº®æ˜¾ç¤º
- âœ… è¿‡æœŸæ—¶æ˜¾ç¤ºæ©™è‰²è­¦å‘Šæ–‡å­—

#### ä¿ç•™ç‰¹æ€§
- âœ… ç°ä»£åŒ–å¡ç‰‡å¼è®¾è®¡
- âœ… æ¸…æ™°çš„çŠ¶æ€æŒ‡ç¤ºï¼ˆå›¾æ ‡+æ–‡å­—ï¼‰
- âœ… ä¸ªæ€§åŒ–æç¤ºæ–‡å­—ï¼ˆå–œæ¬¢æ­Œå•/åˆ›å»ºæ­Œå•ï¼‰
- âœ… è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—è¾“å‡º

#### å€’è®¡æ—¶å®ç°
```javascript
// å€’è®¡æ—¶timerç‹¬ç«‹ç®¡ç†
let countdownTimer = null

// å¼€å§‹å€’è®¡æ—¶
function startCountdown() {
  countdown.value = 120
  countdownTimer = setInterval(() => {
    countdown.value -= 1
    if (countdown.value <= 0) {
      status.value = 'expired'
      stopPolling()
    }
  }, 1000)
}

// åœæ­¢æ—¶æ¸…ç†timer
function stopPolling() {
  if (countdownTimer) {
    clearInterval(countdownTimer)
    countdownTimer = null
  }
}
```

## UIå¯¹æ¯”

### ç»Ÿä¸€åçš„è®¾è®¡è¯­è¨€

#### åŠ è½½çŠ¶æ€
```
[æ—‹è½¬å›¾æ ‡ 40px]
æ­£åœ¨ç”ŸæˆäºŒç»´ç ...
```

#### ç­‰å¾…æ‰«ç 
```
[æ‰‹æœºå›¾æ ‡ 36px]
è¯·ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹APPæ‰«æäºŒç»´ç 
[æç¤ºæ–‡å­—]
äºŒç»´ç å°†åœ¨ 120s åè¿‡æœŸ  â† å€’è®¡æ—¶ï¼ˆè“è‰²ï¼‰
```

#### å·²æ‰«ç 
```
[æˆåŠŸå›¾æ ‡ 40pxï¼Œç»¿è‰²]
å·²æ‰«ç ï¼Œè¯·åœ¨æ‰‹æœºä¸Šç¡®è®¤ç™»å½•
```

#### å·²è¿‡æœŸ
```
[é”™è¯¯å›¾æ ‡ 40pxï¼Œçº¢è‰²]
äºŒç»´ç å·²è¿‡æœŸ
[åˆ·æ–°äºŒç»´ç æŒ‰é’®]
```

## åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”

| ç‰¹æ€§ | LoginDialog | LocalLoginDialog |
|------|------------|------------------|
| å€’è®¡æ—¶åŠŸèƒ½ | âœ… 120ç§’ | âœ… 120ç§’ |
| çŠ¶æ€æç¤º | âœ… å®Œæ•´ | âœ… å®Œæ•´ |
| è®°ä½æˆ‘é€‰é¡¹ | âœ… é»˜è®¤å‹¾é€‰ | âœ… é»˜è®¤å‹¾é€‰ |
| å¡ç‰‡å¼è®¾è®¡ | âœ… ç»Ÿä¸€æ ·å¼ | âœ… ç»Ÿä¸€æ ·å¼ |
| å›¾æ ‡çŠ¶æ€ | âœ… æ‰‹æœº/æˆåŠŸ/é”™è¯¯ | âœ… æ‰‹æœº/æˆåŠŸ/é”™è¯¯ |
| è‡ªåŠ¨è¿‡æœŸ | âœ… å€’è®¡æ—¶æ§åˆ¶ | âœ… å€’è®¡æ—¶æ§åˆ¶ |
| åˆ·æ–°æŒ‰é’® | âœ… è¿‡æœŸæ—¶æ˜¾ç¤º | âœ… è¿‡æœŸæ—¶æ˜¾ç¤º |
| æ§åˆ¶å°æ—¥å¿— | âœ… åŸºæœ¬æ—¥å¿— | âœ… è¯¦ç»†æ—¥å¿— |

## ä½¿ç”¨ç¤ºä¾‹

### LoginDialogï¼ˆä¸»æœºå…¨å±€ç™»å½•ï¼‰
```vue
<template>
  <LoginDialog ref="loginDialog" />
</template>

<script setup>
import LoginDialog from '@/components/LoginDialog.vue'
const loginDialog = ref(null)

// æ‰“å¼€ç™»å½•å¯¹è¯æ¡†
loginDialog.value.open()
</script>
```

### LocalLoginDialogï¼ˆæœ¬æœºç”¨æˆ·ç™»å½•ï¼‰
```vue
<template>
  <el-dialog v-model="showDialog" title="æœ¬æœºç½‘æ˜“äº‘ç™»å½•" width="450px">
    <LocalLoginDialog @success="onSuccess" @close="onClose" />
  </el-dialog>
</template>

<script setup>
import LocalLoginDialog from '@/components/LocalLoginDialog.vue'

function onSuccess() {
  // ç™»å½•æˆåŠŸå¤„ç†
}
</script>
```

## æŠ€æœ¯ç»†èŠ‚

### çŠ¶æ€ç®¡ç†
```javascript
const status = ref('waiting') // 'waiting' | 'scanned' | 'expired' | 'success'
const countdown = ref(120)    // å€’è®¡æ—¶ç§’æ•°
```

### Timerç®¡ç†
```javascript
let pollTimer = null        // è½®è¯¢æ£€æŸ¥äºŒç»´ç çŠ¶æ€
let countdownTimer = null   // å€’è®¡æ—¶timer

// ç»„ä»¶å¸è½½æ—¶æ¸…ç†
onUnmounted(() => {
  stopPolling()
})
```

### æ ·å¼å˜é‡
```css
/* ä¸»è‰²è°ƒ */
--primary-color: #409eff;   /* è“è‰² */
--success-color: #67c23a;   /* ç»¿è‰² */
--warning-color: #e6a23c;   /* æ©™è‰² */
--danger-color: #f56c6c;    /* çº¢è‰² */

/* å°ºå¯¸ */
--qr-size: 200px;
--icon-size: 36-48px;
--border-radius: 12px;
```

## å€’è®¡æ—¶æ˜¾ç¤ºæ•ˆæœ

### æ­£å¸¸å€’è®¡æ—¶
```
äºŒç»´ç å°†åœ¨ 120s åè¿‡æœŸ
           â†‘ è“è‰²é«˜äº®ï¼ŒåŠ¨æ€å˜åŒ–
```

### å³å°†è¿‡æœŸï¼ˆ< 30ç§’ï¼‰
```
äºŒç»´ç å°†åœ¨ 15s åè¿‡æœŸ
           â†‘ ä»ç„¶æ˜¯è“è‰²ï¼Œä½†æ›´é†’ç›®
```

### å·²è¿‡æœŸ
```
äºŒç»´ç å·²è¿‡æœŸ
â†‘ æ©™è‰²è­¦å‘Š
```

## æµè§ˆå™¨å…¼å®¹æ€§

- âœ… Chrome 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Edge 90+

## å“åº”å¼è®¾è®¡

- å¯¹è¯æ¡†å®½åº¦ï¼š450px
- äºŒç»´ç å°ºå¯¸ï¼š200x200pxï¼ˆå›ºå®šï¼‰
- æ–‡å­—è‡ªé€‚åº”ï¼šæ ¹æ®å†…å®¹é•¿åº¦è°ƒæ•´
- ç§»åŠ¨ç«¯ï¼šè‡ªåŠ¨é€‚é…å°å±å¹•

## æ³¨æ„äº‹é¡¹

1. **å€’è®¡æ—¶ç²¾åº¦**ï¼šä½¿ç”¨`setInterval(1000)`ï¼Œç²¾åº¦ä¸ºç§’çº§
2. **Timeræ¸…ç†**ï¼šç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†æ‰€æœ‰timerï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
3. **çŠ¶æ€åŒæ­¥**ï¼šå€’è®¡æ—¶ä¸è½®è¯¢çŠ¶æ€ç‹¬ç«‹ç®¡ç†ï¼Œäº’ä¸å¹²æ‰°
4. **è¿‡æœŸå¤„ç†**ï¼šå€’è®¡æ—¶åˆ°0æ—¶è‡ªåŠ¨åœæ­¢è½®è¯¢ï¼ŒèŠ‚çœèµ„æº

## æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1. âœ… äºŒç»´ç æ­£å¸¸ç”Ÿæˆ
2. âœ… å€’è®¡æ—¶æ­£å¸¸é€’å‡
3. âœ… æ‰«ç åçŠ¶æ€æ­£ç¡®æ›´æ–°
4. âœ… è¿‡æœŸåæ˜¾ç¤ºåˆ·æ–°æŒ‰é’®
5. âœ… åˆ·æ–°åé‡æ–°å¼€å§‹å€’è®¡æ—¶

### æ€§èƒ½æµ‹è¯•
1. âœ… Timeræ­£ç¡®æ¸…ç†ï¼ˆæ— å†…å­˜æ³„æ¼ï¼‰
2. âœ… è½®è¯¢é—´éš”åˆç†ï¼ˆ3ç§’ä¸€æ¬¡ï¼‰
3. âœ… ç»„ä»¶å¸è½½åtimeråœæ­¢

### UIæµ‹è¯•
1. âœ… æ ·å¼åœ¨ä¸åŒæµè§ˆå™¨ä¸€è‡´
2. âœ… è¿‡æ¸¡åŠ¨ç”»æµç•…
3. âœ… çŠ¶æ€åˆ‡æ¢æ¸…æ™°æ˜ç¡®
4. âœ… å€’è®¡æ—¶æ•°å­—æ¸…æ™°å¯è¯»

## æ›´æ–°æ—¥å¿—

### v1.2.0 (2025-11-19)
- âœ¨ ä¸ºä¸¤ä¸ªç™»å½•å¯¹è¯æ¡†ç»Ÿä¸€äº†ç°ä»£åŒ–UIè®¾è®¡
- âœ¨ ä¸ºLocalLoginDialogæ·»åŠ 120ç§’å€’è®¡æ—¶åŠŸèƒ½
- ğŸ¨ ä¼˜åŒ–äº†çŠ¶æ€æç¤ºçš„è§†è§‰æ•ˆæœ
- ğŸ¨ ç»Ÿä¸€äº†å€’è®¡æ—¶æ•°å­—çš„æ˜¾ç¤ºæ ·å¼ï¼ˆè“è‰²é«˜äº®ï¼‰
- ğŸ’„ æ”¹è¿›äº†è¿‡æœŸçŠ¶æ€çš„æç¤ºæ–‡å­—ï¼ˆæ©™è‰²è­¦å‘Šï¼‰
- ğŸ› ä¿®å¤äº†timeræœªæ¸…ç†çš„æ½œåœ¨å†…å­˜æ³„æ¼é—®é¢˜
