# 常见问题解答 (FAQ)

## 安装和配置

### Q: 需要什么前置条件？

**A:** 您需要：
- Node.js（推荐 v16 或更高版本）
- npm（通常随 Node.js 一起安装）
- 一个有效的网易云音乐账号
- 局域网环境（如果需要多设备访问）

### Q: 如何安装 Node.js？

**A:** 
1. 访问 [Node.js 官网](https://nodejs.org/)
2. 下载 LTS（长期支持）版本
3. 运行安装程序，一路默认即可
4. 安装完成后，打开命令行输入 `node -v` 验证安装

### Q: 安装依赖时出错怎么办？

**A:** 尝试以下方法：
1. 确保网络连接正常
2. 使用国内镜像源：
   ```bash
   npm config set registry https://registry.npmmirror.com
   ```
3. 清除 npm 缓存：
   ```bash
   npm cache clean --force
   ```
4. 删除 `node_modules` 文件夹后重新安装

### Q: 配置文件在哪里？

**A:** 配置文件位于 `server/config.json`。如果没有这个文件，请复制 `server/config.example.json` 并重命名。

## 登录和账号

### Q: 推荐使用哪种登录方式？

**A:** 强烈推荐使用**二维码登录**：
- ✅ 更安全，不需要保存密码
- ✅ 不容易触发风控
- ✅ 使用体验更好
- ✅ 支持所有账号类型

配置：
```json
{
  "loginMethod": "qrcode",
  "port": 3000
}
```

### Q: 如何使用二维码登录？

**A:** 步骤：
1. 配置 `"loginMethod": "qrcode"`
2. 启动服务器
3. 控制台会显示二维码
4. 打开网易云音乐 APP
5. 扫描二维码并确认登录
6. 登录成功后服务器继续启动

### Q: 二维码无法显示怎么办？

**A:** 
1. 控制台会同时显示二维码 URL
2. 复制 URL 在浏览器打开
3. 使用手机扫描浏览器中的二维码
4. 或截图后使用相册识别二维码

### Q: 二维码过期了怎么办？

**A:** 
- 二维码有效期 2 分钟
- 过期后重启服务器会生成新的二维码
- 建议在启动服务器后立即扫码

### Q: 手机号密码登录失败怎么办？

**A:** 
1. **建议改用二维码登录**（更稳定）
2. 如果必须使用密码登录：
   - 检查手机号和密码是否正确
   - 是否触发了网易云的风控
   - 先在网易云官网登录一次
   - 尝试更换网络环境

### Q: 可以使用邮箱登录吗？

**A:** 
- 二维码登录支持所有类型的账号（邮箱、手机号）
- 手机号密码登录只支持已绑定手机的账号

### Q: 需要 VIP 账号吗？

**A:** 不是必须的。普通账号可以播放大部分歌曲，但部分 VIP 歌曲需要 VIP 账号才能播放。

### Q: 会不会导致账号被封？

**A:** 正常使用不会。但建议：
- 使用专门的公共账号，不要使用个人账号
- 不要频繁切换登录
- 不要在短时间内进行大量操作

## 使用问题

### Q: 搜索不到歌曲？

**A:** 可能的原因：
1. **网络问题**：检查服务器网络连接
2. **关键词问题**：尝试换个关键词或使用歌手名
3. **API 限制**：等待几分钟后再试
4. **版权问题**：某些歌曲可能没有版权

### Q: 点歌后没有反应？

**A:** 检查以下几点：
1. 查看浏览器控制台是否有错误信息
2. 确认 WebSocket 连接是否正常（控制台会显示连接状态）
3. 刷新页面重新连接
4. 检查后端服务是否正常运行

### Q: 歌曲无法播放？

**A:** 可能的原因：
1. **VIP 歌曲**：需要 VIP 账号
2. **版权限制**：部分歌曲没有播放权限
3. **链接过期**：播放链接有时效性（系统会自动跳到下一首）
4. **网络问题**：检查网络连接

### Q: 播放器没有声音？

**A:** 请检查：
1. 浏览器是否静音（查看标签页图标）
2. 系统音量是否开启
3. 音响设备是否正确连接和开启
4. 播放器的音量滑块是否为 0
5. 尝试刷新页面

### Q: 队列不同步？

**A:** 尝试：
1. 刷新页面
2. 检查 WebSocket 连接状态（控制台会显示）
3. 重启服务器
4. 检查防火墙设置

## 网络问题

### Q: 局域网内其他设备无法访问？

**A:** 请检查：

1. **防火墙设置**：
   - Windows：控制面板 → Windows Defender 防火墙 → 高级设置
   - 添加入站规则，允许 3000 端口（或您配置的端口）

2. **IP 地址**：
   - 确保使用正确的局域网 IP（服务器启动时会显示）
   - 不要使用 localhost 或 127.0.0.1

3. **网络环境**：
   - 确保所有设备在同一局域网内
   - 某些公共 WiFi 会隔离设备，无法互相访问

4. **端口占用**：
   - 检查端口是否被其他程序占用
   - 尝试更换端口号

### Q: 如何查看服务器的局域网 IP？

**A:** 
- 服务器启动时会自动显示局域网地址
- 或在命令行输入：
  - Windows: `ipconfig`（查看 IPv4 地址）
  - Linux/Mac: `ifconfig` 或 `ip addr`

### Q: 可以在公网访问吗？

**A:** 技术上可以，但**不推荐**：
1. 安全风险：配置文件包含账号密码
2. 带宽限制：个人网络上传带宽有限
3. 如果确实需要，请：
   - 使用 HTTPS 加密
   - 配置反向代理（Nginx）
   - 设置访问密码
   - 考虑使用 VPN

## 性能问题

### Q: 播放卡顿怎么办？

**A:** 优化建议：
1. 主控设备使用有线网络
2. 关闭其他占用网络的程序
3. 升级网络带宽
4. 检查 CPU 和内存使用情况

### Q: 支持多少人同时点歌？

**A:** 理论上没有限制，但受限于：
- 服务器性能
- 网络带宽
- 实际测试 20-30 人同时使用没有问题

### Q: 如何提高性能？

**A:** 
1. 使用性能更好的服务器
2. 使用 Redis 缓存队列数据
3. 使用 CDN 加速静态资源
4. 优化网络环境

## 功能问题

### Q: 支持歌词显示吗？

**A:** 当前版本（v1.0.0）暂不支持，但后端 API 已实现获取歌词的功能，后续版本会添加。

### Q: 可以下载歌曲吗？

**A:** 不支持，也不建议这样做，可能违反版权法律。

### Q: 支持其他音乐平台吗？

**A:** 当前版本只支持网易云音乐，后续版本计划支持 QQ 音乐、酷狗等。

### Q: 可以设置权限吗？

**A:** 当前版本所有人都可以点歌，后续版本会添加用户系统和权限管理。

### Q: 支持播放历史吗？

**A:** 后端已维护播放历史，但前端暂未展示，后续版本会添加。

### Q: 可以循环播放吗？

**A:** 当前版本不支持循环播放，队列播放完毕后会停止。

## 开发问题

### Q: 如何修改端口号？

**A:** 编辑 `server/config.json` 文件：
```json
{
  "phone": "...",
  "password": "...",
  "port": 8080
}
```

### Q: 如何自定义样式？

**A:** 编辑对应的 `.vue` 文件中的 `<style>` 部分。例如：
- 点歌页面：`client/src/views/Request.vue`
- 播放器页面：`client/src/views/Player.vue`
- 全局样式：`client/src/App.vue`

### Q: 如何添加新功能？

**A:** 
1. 后端：在 `server/app.js` 添加 API 路由
2. 前端：在 `client/src/views/` 创建组件
3. 路由：在 `client/src/router/index.js` 添加路由
4. 参考 `PROJECT_STRUCTURE.md` 了解项目结构

### Q: 如何调试？

**A:** 
- 后端：查看终端输出的日志
- 前端：打开浏览器控制台（F12）
- WebSocket：控制台 Network 选项卡可以查看 WebSocket 消息

## 部署问题

### Q: 如何部署到服务器？

**A:** 
1. 在服务器上安装 Node.js
2. 上传项目文件
3. 运行 `install.bat` 或手动安装依赖
4. 配置 `config.json`
5. 运行 `build.bat` 构建前端
6. 运行 `start-prod.bat` 启动服务
7. 配置反向代理（可选，推荐使用 Nginx）

### Q: 如何使用 Docker 部署？

**A:** 当前版本未提供 Dockerfile，后续版本会添加。您也可以自己编写：
```dockerfile
FROM node:16
WORKDIR /app
COPY . .
RUN cd server && npm install
RUN cd client && npm install && npm run build
CMD ["node", "server/app.js"]
```

### Q: 如何设置开机自启动？

**A:** 
- **Windows**：
  1. Win+R 输入 `shell:startup`
  2. 创建 `start-prod.bat` 的快捷方式放入该文件夹

- **Linux**：
  1. 创建 systemd 服务
  2. 或使用 PM2: `pm2 start server/app.js`

### Q: 如何备份数据？

**A:** 当前版本数据存在内存中，重启会丢失。后续版本会支持数据持久化。

## 其他问题

### Q: 项目开源吗？

**A:** 是的，使用 MIT 许可证。

### Q: 可以商用吗？

**A:** MIT 许可证允许商用，但请注意：
1. 遵守音乐版权法律
2. 不要用于非法用途
3. 使用风险自负

### Q: 如何贡献代码？

**A:** 
1. Fork 项目
2. 创建功能分支
3. 提交代码
4. 发起 Pull Request

### Q: 遇到 Bug 怎么办？

**A:** 
1. 查看本 FAQ 和 GUIDE.md
2. 查看控制台错误信息
3. 在 GitHub 提交 Issue
4. 提供详细的错误信息和重现步骤

### Q: 如何获得帮助？

**A:** 
1. 阅读文档：README.md、GUIDE.md、PROJECT_STRUCTURE.md
2. 查看本 FAQ
3. 搜索已有的 Issue
4. 提交新的 Issue

## 最佳实践

### 推荐配置

1. **网络环境**：
   - 主控设备使用有线连接
   - 使用 5G WiFi（非移动网络的 5G）
   - 确保网络稳定

2. **浏览器选择**：
   - Chrome / Edge（推荐）
   - Firefox
   - Safari（Mac）
   - 使用最新版本

3. **使用建议**：
   - 定期清理播放队列
   - 不要添加过多歌曲到队列
   - 主控设备保持屏幕常亮
   - 定期重启服务（长时间运行后）

## 更新日志

查看 `CHANGELOG.md` 了解版本更新内容。

---

如果您的问题没有在这里找到答案，欢迎提交 Issue 或参与讨论！

